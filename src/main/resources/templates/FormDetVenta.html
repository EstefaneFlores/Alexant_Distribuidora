<!doctype html>
<html class="no-js " lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<meta name="description" content="Responsive Bootstrap 4 and web Application ui kit.">
<title>Registro Detalle Venta | ECG</title>


 <!-- DataTables -->
 <link href="../../../../assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet"
 type="text/css" />
<link href="../../../../assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet"
 type="text/css" />

<!-- Responsive datatable examples -->
<link href="../../../../assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css"
 rel="stylesheet" type="text/css" />

<link href="../../../../assets/libs/alertifyjs/build/css/alertify.min.css" rel="stylesheet" type="text/css" />
<link href="../../../../assets/libs/alertifyjs/build/css/themes/default.min.css" rel="stylesheet" type="text/css" />

<!-- Bootstrap Css -->
<link href="../../../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<!-- Icons Css -->
<link href="../../../../assets/css/icons.min.css" rel="stylesheet" type="text/css" />
<!-- App Css-->
<link href="../../../../assets/css/app.min.css" rel="stylesheet" type="text/css" />

<link rel="icon" href="/assets/images/logoOficial.ico" type="image/x-icon"> <!-- Favicon-->
<link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/assets/plugins/morrisjs/morris.css" />
<link rel="stylesheet" href="/assets/plugins/jvectormap/jquery-jvectormap-2.0.3.min.css"/>
<!-- Custom Css -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/color_skins.css">

<link rel="stylesheet" href="/assets/">
</head>
<body class="theme-black menu_dark">
<!-- Page Loader -->
<div class="page-loader-wrapper">
    <div class="loader">
        <div class="m-t-30"><img src="/assets/images/logoOficial.jpg" width="48" height="48" alt="Alpino"></div>
        <p>Espere Porfavor...</p>        
    </div>
</div>

<!-- COMIENZO TEST -->
<section class="content">  
    <div class="container-fluid">
        <div class="block-header">
            <div class="row">
                <div class="col-lg-5 col-md-5 col-sm-12">
                    <h2>Administración Detalle Venta</h2>
                    <ul class="breadcrumb padding-0">
                  
                    </ul>
                </div>
                <div class="col-lg-7 col-md-7 col-sm-12">
                    <div class="input-group m-b-0">                
                        <input type="text" class="form-control" placeholder="Buscar...">
                        <span class="input-group-addon">
                            <i class="zmdi zmdi-search"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- #Lista de registros -->  
         <div class="page-content-wrapper">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">

                                        <h4 class="header-title"></i>Detalle Ventas Registradas</h4>

                                        <!-- ------------- -->

                                       
                                        <div class="text-right mb-3">
                                            <button type="button"
                                                class="btn btn-primary btn-sm waves-effect waves-light"
                                                onclick="NuevoRegistro()">Registrar</button>
                                        </div>

                                        <!-- ------------- -->

                                        <table id="datatable-buttons"
                                            class="table table-striped table-bordered dt-responsive nowrap botonesH"
                                            style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                            <thead>
                                                <tr>
                                                    <th>Número Venta</th>
                                                    <th>Cantidad Det. Venta</th>
                                                    <th>Producto</th>
                                                    <th>Precio Unitário</th>
                                                    <th>Descripción</th>
                                                     <th>Opciones</th>

                                                </tr>
                                            </thead>

                                            <tbody>
                                                <tr th:each="dv : ${det_Ventas}" th:if="${dv.estado_det_venta != 'X'}">
                                                    <td th:text="${dv.venta.nro_venta}"></td>
                                                    <td th:text="${dv.cantidad_det_venta}"></td>
                                                    <td th:text="${dv.sub_total}"></td>
                                                    <td th:text="${dv.sub_total_descuento}"></td>
                                                    <td th:text="${dv.unidad_medida}"></td>
        
                                                    <td>
                                                        <div class="row justify-content-center">
                                                            <div class="mb-2">
                                                                <a 
                                                                    th:href="${'../../../../eliminarDet_Venta/' + dv.id_detalleVenta}">
                                                                  
                                                                    <button type="submit" class="btn btn-primary"
                                                                    
                                                                        style=" padding: 2px;">
                                                                        <i class="material-icons" style="color: rgb(243, 4, 4);">delete</i> 
                                                                    </button>
                                                                </a>
                                                            </div>

                                                            <div class="mb-2">
                                                                <a>
                                                                    <button type="button" 
                                                                        class="btn btn-primary btn-sm waves-effect waves-light editarButton"
                                                                        data-toggle="modal"
                                                                        th:data-target="${'#bs-example-modal-center'}"
                                                                        th:data-iddetalleventa="${dv.id_detalleVenta}"
                                                                        style="padding: 2px;" 
                                                                        onclick="buscar(this)"> 
                                                                        <i class="material-icons" style="color: rgb(209, 196, 16);">mode_edit</i>
                                                                       
                                                                    </button>
                                                                </a>
                                                            </div>

                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div> 
                              </div>
                            </div> <!-- end col -->
                        </div> <!-- end row -->

                    </div>
                    <!-- end container-fluid -->
                </div>

    </div>

</section>

<div class="modal fade" id="bs-example-modal-center" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-body">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <form id="miFormulario" class="needs-validation" th:action="@{/guardarDet_Venta}"
                method="post" novalidate>

                <div id="replace_DetVenta"></div>

                <div class="text-right mt-3">
                    <button type="submit" onclick="validarFormulario()"
                        class="btn btn-primary mr-2">Guardar</button>
                    <button type="button" class="btn btn-secondary"
                        data-dismiss="modal">Cancelar</button>
                </div>
            </form>
        </div>

    </div>
</div>
</div>

<!-- FIN TEST -->
<div class="overlay_menu">
    <button class="btn btn-primary btn-icon btn-icon-mini btn-round"><i class="zmdi zmdi-close"></i></button>
    <div class="container">        
        <div class="row clearfix">
            <div class="card">
                <div class="body">
                    <div class="input-group m-b-0">                
                        <input type="text" class="form-control"  placeholder="Search...">
                        <span class="input-group-addon">
                            <i class="zmdi zmdi-search"></i>
                        </span>
                    </div>
                </div>
            </div>
            <div class="card links">
                <div class="body">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <h6>About</h6>
                            <ul class="list-unstyled">
                                <li><a href="http://thememakker.com/about/" target="_blank">About</a></li>
                                <li><a href="http://thememakker.com/contact/" target="_blank">Contact Us</a></li>
                                <li><a href="http://thememakker.com/admin-templates/" target="_blank">Admin Templates</a></li>
                                <li><a href="http://thememakker.com/services/" target="_blank">Services</a></li>
                                <li><a href="http://thememakker.com/portfolio/" target="_blank">Portfolio</a></li>                            
                            </ul>
                        </div>
                    </div>
                </div>
            </div>            
        </div>
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12">
                <div class="social">
                    <a class="icon" href="https://www.facebook.com/profile.php?id=61561119215364" target="_blank"><i class="zmdi zmdi-facebook"></i></a>
                    <a class="icon" href="https://www.behance.net/thememakker" target="_blank"><i class="zmdi zmdi-behance"></i></a>
                    <a class="icon" href="#"><i class="zmdi zmdi-twitter"></i></a>
                    <a class="icon" href="#"><i class="zmdi zmdi-linkedin"></i></a>                    
                    <p>Coded by WrapTheme<br> Designed by <a href="http://thememakker.com/" target="_blank">thememakker.com</a></p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="overlay"></div><!-- Overlay For Sidebars -->

<!-- Left Sidebar -->
<aside id="minileftbar" class="minileftbar">
    <ul class="menu_list">

        <li><a href="javascript:void(0);" class="menu-sm"><i class="zmdi zmdi-swap"></i></a></li>        
        <!-- <li class="menuapp-btn"><a href="javascript:void(0);"><i class="zmdi zmdi-apps"></i></a></li> -->
        <li><a href="javascript:void(0);" class="fullscreen" data-provide="fullscreen"><i class="zmdi zmdi-fullscreen"></i></a></li>
        <li class="power">
            <a href="javascript:void(0);" class="js-right-sidebar"><i class="zmdi zmdi-settings zmdi-hc-spin"></i></a>            
           <a href="/Alexant/login" class="mega-menu"><i class="zmdi zmdi-power"></i></a>
        </li>
    </ul>    
</aside>

<aside class="right_menu">
    <!-- <div class="menu-app">
        <div class="slim_scroll">
            <div class="card">
                <div class="header">
                    <h2><strong>App</strong> Menu</h2>
                </div>
                <div class="body">
                    <ul class="list-unstyled menu">
                        <li><a href="events.html"><i class="zmdi zmdi-calendar-note"></i><span>Calendar</span></a></li>
                        <li><a href="file-dashboard.html"><i class="zmdi zmdi-file-text"></i><span>File Manager</span></a></li>
                        <li><a href="blog-dashboard.html"><i class="zmdi zmdi-blogger"></i><span>Blog</span></a></li>
                        <li><a href="javascript:void(0)"><i class="zmdi zmdi-arrows"></i><span>Notes</span></a></li>
                        <li><a href="javascript:void(0)"><i class="zmdi zmdi-view-column"></i><span>Taskboard</span></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div> -->
 
    <div id="rightsidebar" class="right-sidebar">
        
        <div class="tab-content slim_scroll">
            <div class="tab-pane slideRight active" id="setting">
             


                <div class="card">

                    <ul class="nav nav-tabs">
                        <li class="nav-item"><a class="nav-link active" data-toggle="tab">PERSONALIZAR MENUS</a></li>        
                        <!-- <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#activity">Activity</a></li> -->
                    </ul>
                    <div class="header">
                        <h2><strong>DERECHO</strong> </h2>
                    </div>
                    <div class="body">
                        <ul class="choose-skin list-unstyled m-b-0">
                            <li data-theme="black" class="active">
                                <div class="black"></div>
                            </li>
                            <li data-theme="purple">
                                <div class="purple"></div>
                            </li>                   
                            <li data-theme="blue">
                                <div class="blue"></div>
                            </li>
                            <li data-theme="cyan">
                                <div class="cyan"></div>                    
                            </li>
                            <li data-theme="green">
                                <div class="green"></div>
                            </li>
                            <li data-theme="orange">
                                <div class="orange"></div>
                            </li>
                            <li data-theme="blush">
                                <div class="blush"></div>                    
                            </li>
                        </ul>
                    </div>

                    <div class="header">
                        <h2><strong>IZQUIERDO</strong></h2>
                    </div>
                    <div class="body theme-light-dark">
                        <button class="t-dark btn btn-primary btn-round btn-block">Oscuro</button>
                    </div>
                    
    

                </div>                
              
                   
                </div> 
                <div class="card">
                   
                </div>               
            </div>
        
               
            </div> 
        </div>
    </div>
    <div id="leftsidebar" class="sidebar">
        <div class="menu">
            <ul class="list">
                <li>
                    <div class="user-info m-b-20">
                        <div class="image">
                            <a href="/Alexant/Inicio"><img src="/assets/images/logoOficial.jpg" alt="User"></a>
                        </div>
                        <div class="detail">
                            <h6>ECG VENTAS</h6>
                          
                            <a href="#" title="" class=" waves-effect waves-block"><i class="zmdi zmdi-facebook-box"></i></a>
                            <a href="#" title="" class=" waves-effect waves-block"><i class="zmdi zmdi-linkedin-box"></i></a>                         
                        </div>
                    </div>
                </li>
                <li class="header"> ADMINISTRACIÓN</li>

                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-assignment"></i><span>PERSONAS</span> <span class="badge badge-primary float-right">5</span></a>
                    <ul class="ml-menu">
                       
                    	<li><a href="/sistema/usuario/listaUs">Usuario</a></li>
                    	<li><a href="/ListasCliente">Cliente</a></li>
                    	<li><a href="/ListasEmpleado">Empleado</a></li>
                    	<li><a href="/formRegistroPersona">Persona</a></li>
                    	<li><a href="/ListasProveedor">Proveedor</a></li>
            
                    </ul>
                </li>

                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-assignment"></i><span>FUNCIONES</span> <span class="badge badge-success float-right">4</span></a>
                    <ul class="ml-menu">
                        <li><a href="/formAdministrarCargo">Cargo</a></li> 
                    	<li><a href="/ListasTiempoCargo">Tiempo en Cargo</a></li>
                    	<li><a href="/ListasUsuarioRol">Rol</a></li>
                    	<li><a href="/Listasruta">Ruta</a></li>
                    </ul>
                </li>

                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-assignment"></i><span>BIENES</span> <span class="badge badge-danger float-right">2</span></a>
                    <ul class="ml-menu">
                        <li><a href="/formAdministrarBiene">Biene</a></li>
                    	<li><a href="/ListasTipoBiene">Tipo Biene</a></li>
            
                    </ul>
                </li>

                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-assignment"></i><span>PROD/LOTE</span> <span class="badge badge-warning  float-right">5</span></a>
                    <ul class="ml-menu">
                        <li><a href="/formRegistroProducto">Producto</a></li>
                        <li><a href="/formRecepcionProducto">Recepción del Producto</a></li>
                        <li><a href="/ListasCategoria">Categorias</a></li>
                        <li><a href="/ListasLote">Lote</a></li>
                        <li><a href="/ListasDetalle_lote">Det. Lote</a></li> 
                    </ul>
                </li> 

                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-assignment"></i><span>PAGOS</span> <span class="badge badge-info float-right">4</span></a>
                    <ul class="ml-menu">
                        <li><a href="/formRegistroPago">Pago</a></li>
                        <li><a href="/ListasTipoCambios">Tipo Cambio</a></li>
                        <li><a href="/formRegistroMoneda">Moneda</a></li>
                        <li><a href="/formRegistroFormaPago">Forma Pago</a></li>
                    </ul>
                </li> 
                
                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-assignment"></i><span>VENTAS</span> <span class="badge badge-dark float-right">3</span></a>
                    <ul class="ml-menu">
                   
                        <li><a href="/formAdministrarVenta"> Venta</a></li>
                        <li><a href="/ListasDeFactura"> Factura</a></li>
                        <li><a href="/ListasDetalle_Factura"> Det. Factura</a></li>
                    </ul>
                </li>
            
            </ul>
        </div>
    </div>
</aside>


<script>

    function buscar(button) {
        var id_DetalleVenta = $(button).data('iddetalleventa');
        
        var url = "../../../../registrarDetVenta/" + id_DetalleVenta;

        $('#replace_DetVenta').load(url, function () {
            $('#modal-form').attr('action', '/guardarModificacionesDetVenta');
            $('#bs-example-modal-center').modal('show');
        });
    }

    function NuevoRegistro() {

        var url = "../../../../registrarDetVenta";

        $('#replace_DetVenta').load(url, function () {
            $('#modal-form').attr('action', '/guardarNuevoDetVenta'); 
            $('#bs-example-modal-center').modal('show');
        });
    }
 
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("miFormulario");

        form.addEventListener("submit", function (event) {
            let isValid = true; // Variable para rastrear la validez del formulario

            // Obtén todos los campos obligatorios (los que tienen el atributo "required")
            const requiredFields = form.querySelectorAll("[required]");

            requiredFields.forEach(function (field) {
                if (!field.value) {
                    // Si un campo obligatorio está vacío, muestra un mensaje de error
                    isValid = false;
                    field.classList.add("is-invalid");
                } else {
                    field.classList.remove("is-invalid");
                }
            });

            if (!isValid) {
                // Si el formulario no es válido, evita que se envíe
                event.preventDefault();
            }
        });
    });


</script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="../../../../assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../../../../assets/libs/metismenu/metisMenu.min.js"></script>
<script src="../../../../assets/libs/simplebar/simplebar.min.js"></script>
<script src="../../../../assets/libs/node-waves/waves.min.js"></script>
<script src="https://unicons.iconscout.com/release/v2.0.1/script/monochrome/bundle.js"></script>

<!-- Required datatable js -->
<script src="../../../../assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="../../../../assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>

<!-- Buttons examples -->
<script src="../../../../assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="../../../../assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
<script src="../../../../assets/libs/jszip/jszip.min.js"></script>
<script src="../../../../assets/libs/pdfmake/build/pdfmake.min.js"></script>
<script src="../../../../assets/libs/pdfmake/build/vfs_fonts.js"></script>
<script src="../../../../assets/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="../../../../assets/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="../../../../assets/libs/datatables.net-buttons/js/buttons.colVis.min.js"></script>
<!-- Responsive examples -->
<script src="../../../../assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="../../../../assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>

<!-- Datatable init js -->
<script src="../../../../assets/js/pages/datatables.init.js"></script>

<!-- alert -->
<script src="../../../../assets/libs/alertifyjs/build/alertify.min.js"></script>
<script src="../../../../assets/js/pages/alertifyjs.init.js"></script>



<!-- Jquery Core Js -->



<script src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<script src="/assets/bundles/libscripts.bundle.js"></script> <!-- Lib Scripts Plugin Js ( jquery.v3.2.1, Bootstrap4 js) -->
<script src="/assets/bundles/vendorscripts.bundle.js"></script> <!-- slimscroll, waves Scripts Plugin Js -->

<script src="/assets/bundles/knob.bundle.js"></script> <!-- Jquery Knob-->
<script src="/assets/bundles/jvectormap.bundle.js"></script> <!-- JVectorMap Plugin Js -->
<script src="/assets/bundles/morrisscripts.bundle.js"></script> <!-- Morris Plugin Js --> 
<script src="/assets/bundles/sparkline.bundle.js"></script> <!-- sparkline Plugin Js --> 

<script src="/assets/bundles/mainscripts.bundle.js"></script>
<script src="/assets/js/pages/index.js"></script>
<script src="/assets/js/pages/widgets/infobox/infobox-1.js"></script>
</body>
</html>